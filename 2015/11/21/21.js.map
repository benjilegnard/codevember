{"version":3,"sources":["21.js"],"names":[],"mappings":"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","file":"2015/11/21/21.js","sourcesContent":["const LINE_COLOR = 'white';\r\nconst BACK_COLOR = 'rgb(0,0,0)';\r\nconst SOUND_SOURCE = 'http://media.soundcloud.com/stream/vOY0tiM1S6pU.mp3';\r\n\r\nconst audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\nconst gainNode = audioContext.createGain();\r\nconst analyser = audioContext.createAnalyser();\r\n\r\nconst canvas = document.getElementById('canvas');\r\nconst context = canvas.getContext('2d');\r\n\r\nanalyser.fftSize = 512;\r\nvar buffer = null;\r\nvar bufferLength = analyser.frequencyBinCount;\r\nvar dataArray = new Uint8Array(bufferLength);\r\n\r\nconst\r\n    playSound =\r\n        (buffer) => {\r\n            let source = audioContext.createBufferSource(); // creates a sound source\r\n            source.buffer = buffer;\r\n            source.connect(gainNode);\r\n            gainNode.connect(audioContext.destination);\r\n            source.connect(analyser);\r\n            source.loop = true;\r\n            source.start();\r\n        },\r\n    draw =\r\n        () => {\r\n            analyser.getByteFrequencyData(dataArray);\r\n\r\n            var baseY = canvas.height / 2,\r\n                path = new Path2D();\r\n            path.moveTo(0, baseY);\r\n            var spaceX = canvas.width / bufferLength;\r\n            for (let i = 0; i < bufferLength; i++) {\r\n                let y = dataArray[i] / 128 * baseY - baseY;\r\n                path.lineTo(\r\n                    i * spaceX,\r\n                    y + baseY);\r\n            }\r\n            context.strokeStyle = LINE_COLOR;\r\n            context.stroke(path);\r\n        },\r\n    animate = (timestamp) => {\r\n        context.fillStyle = BACK_COLOR;\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n        //Draw\r\n        draw();\r\n        requestAnimationFrame(animate);\r\n    },\r\n    resize =\r\n        (event) => {\r\n            canvas.width = window.innerWidth;\r\n            canvas.height = window.innerHeight;\r\n        },\r\n    loaded =\r\n        (event) => {\r\n            audioContext.decodeAudioData(this.response, playSound);\r\n        },\r\n    requestSource =\r\n        ()=> {\r\n            let request = new XMLHttpRequest();\r\n            request.responseType = \"arraybuffer\";\r\n            request.addEventListener(\"load\", loaded);\r\n            request.open(\"GET\", SOUND_SOURCE);\r\n            request.send();\r\n        },\r\n    initialize =\r\n        (event) => {\r\n            requestSource();\r\n            resize();\r\n            animate();\r\n        };\r\n\r\nwindow.addEventListener('resize', resize);\r\ndocument.addEventListener('DOMContentLoaded', initialize);"],"sourceRoot":"/source/"}