{"version":3,"sources":["07.js"],"names":[],"mappings":"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","file":"2015/11/07/07.js","sourcesContent":["const\r\n    GRAVITY = 0.8,\r\n    TAU = Math.PI * 2,\r\n    MAX_PARTICLES = 420,\r\n    MAX_SPEED = 6,\r\n    PARTICLE_FREQUENCY = 1,\r\n    BASE_RADIUS = 20,\r\n    RADIUS_REDUCTION_SPEED = 0.05,\r\n    canvas = document.getElementById('c'),\r\n    context = canvas.getContext('2d'),\r\n    particles = [];\r\n\r\nlet\r\n    getOrigin = () => {\r\n        return {\r\n            x: window.innerWidth * .5,\r\n            y: window.innerHeight * .5\r\n        };\r\n    },\r\n    origin = getOrigin(),\r\n    frameCount = 0,\r\n    resize = () => {\r\n        canvas.width = window.innerWidth;\r\n        canvas.height = window.innerHeight;\r\n\r\n        origin = getOrigin();\r\n    },\r\n    randomColor = ()=>{\r\n        const base = 200,offset = 255 - base;\r\n        const r = Math.random()*base + offset,\r\n            g = Math.random()*base + offset,\r\n            b = Math.random()*base + offset;\r\n        return (r << 16 | g <<8 | b);\r\n    },\r\n    /**\r\n     * reset or creates a new particle.\r\n     */\r\n    particleFactory = (particle) => {\r\n        let p = particle || {};\r\n        p.x = origin.x;\r\n        p.y = origin.y;\r\n        p.color = randomColor();\r\n        p.angle = Math.random() * TAU;\r\n        p.radius = BASE_RADIUS;\r\n        p.speed = Math.random() * MAX_SPEED;\r\n        return p;\r\n    },\r\n    dead = (particle) => {\r\n        return particle.radius < 0\r\n            || particle.x < 0 - particle.radius\r\n            || particle.y < 0 - particle.radius\r\n            || particle.x > canvas.width +  particle.radius\r\n            || particle.y > canvas.height + particle.radius\r\n\r\n\r\n            ;\r\n    },\r\n    move = (particle) => {\r\n        particle.x += Math.cos(particle.angle)*particle.speed;\r\n        particle.y += Math.sin(particle.angle)*particle.speed - GRAVITY;\r\n        particle.radius -= RADIUS_REDUCTION_SPEED;\r\n    },\r\n    draw = (particle) => {\r\n        if(particle.radius > 0){\r\n            context.fillStyle = '#' + particle.color.toString(16);\r\n            context.beginPath();\r\n            context.arc(particle.x, particle.y, particle.radius, 0, TAU, true);\r\n            context.fill();\r\n        }\r\n    },\r\n\r\n    animate = (t) => {\r\n\r\n        //reset canvas\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        //Draw\r\n        let aliveParticles = particles.filter((p)=>{return !dead(p);});\r\n        aliveParticles.forEach(draw);\r\n        aliveParticles.forEach(move);\r\n\r\n        //new particle\r\n        if(frameCount%PARTICLE_FREQUENCY == 0 )\r\n        {\r\n            //don't create a new particle every time, for performance\r\n            let deadParticles = particles.filter(dead);\r\n            if(particles.length < MAX_PARTICLES && deadParticles.length == 0){\r\n                particles.push(particleFactory());\r\n            }else{\r\n                particleFactory(particles.filter(dead)[0]);\r\n            }\r\n        }\r\n        frameCount++;\r\n        requestAnimationFrame(animate);\r\n    },\r\n    init = () => {\r\n        resize();\r\n        animate();\r\n    };\r\ndocument.addEventListener('DOMContentLoaded',init);\r\nwindow.addEventListener('resize',resize);\r\ncanvas.addEventListener('mousedown',(e)=>{\r\n    origin.x = e.clientX;\r\n    origin.y = e.clientY;\r\n});\r\n"],"sourceRoot":"/source/"}