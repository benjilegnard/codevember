"use strict";function nextAngle(){var n=[ISO_ANGLE,-ISO_ANGLE,Math.PI-ISO_ANGLE,Math.PI+ISO_ANGLE],t=Math.floor(Math.random()*n.length);return n[t]}function lineFactory(n){var t=n||{};return t.color={},t.color.r=Math.floor(64*(3*Math.random()+1)),t.color.g=Math.floor(3*Math.random()*64),t.color.b=Math.floor(3*Math.random()*64),t.points=[],t}function init(){for(var n=0;LINE_AMOUNT>n;n++){var t=lineFactory();polylines.push(t)}polylines.forEach(initLine)}function nextPoint(n,t,o){var i=o||{};n.angle=nextAngle(n.angle),i.x=n.points[t-1].x+Math.cos(n.angle)*SEGMENT_LENGTH,i.y=n.points[t-1].y+Math.sin(n.angle)*SEGMENT_LENGTH,n.points.push(i)}function shiftPoint(n){var t=n.points.shift();nextPoint(n,n.points.length,t)}function initLine(n){n.points.push({x:Math.floor(Math.random()*canvas.width),y:Math.floor(Math.random()*canvas.height)});for(var t=1;SEGMENTS>t;t++)nextPoint(n,t);return n}function draw(n){context.strokeStyle="rgb("+n.color.r+","+n.color.g+","+n.color.b+")";for(var t=1;t<n.points.length;t++)context.beginPath(),context.moveTo(n.points[t-1].x,n.points[t-1].y),context.lineTo(n.points[t].x,n.points[t].y),context.stroke()}function move(n){polylines.forEach(function(n){for(var t=0;t<n.points.length;t++)n.points[t].y+=.01;var o=n.points.filter(function(n){return n.y>0&&n.y<canvas.height&&n.x<canvas.width&&n.x>0});if(0===o.length){var i=polylines.splice(polylines.indexOf(n),1)[0];polylines.push(initLine(lineFactory(i)))}})}function resize(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}function animate(n){context.fillStyle="black",context.fillRect(0,0,canvas.width,canvas.height),polylines.forEach(move),polylines.forEach(draw),frameCount%10==0&&polylines.forEach(shiftPoint),frameCount++,requestAnimationFrame(animate)}var LINE_AMOUNT=42,TAU=2*Math.PI,ISO_ANGLE=27*TAU/360,SEGMENTS=12,SEGMENT_LENGTH=80,polylines=[],canvas=document.getElementById("canvas"),context=canvas.getContext("2d"),frameCount=0;document.addEventListener("DOMContentLoaded",function(n){resize(),init(),animate(),window.addEventListener("resize",resize)});