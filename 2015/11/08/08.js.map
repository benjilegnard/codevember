{"version":3,"sources":["08.js"],"names":[],"mappings":"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","file":"2015/11/08/08.js","sourcesContent":["const\r\n    GRAVITY = 0.8,\r\n    TAU = Math.PI * 2,\r\n    MAX_PARTICLES = 420,\r\n    MAX_SPEED = 4,\r\n    PARTICLE_FREQUENCY = 1,\r\n    BASE_RADIUS = 20,\r\n    RADIUS_REDUCTION_SPEED = 0.05,\r\n    WOBBLE_FREQUENCY = 1, //5.5,\r\n    WOBBLE_ANGLE = TAU / 10,\r\n    DIRECTION_CHANGE_SPEED = 0.16,\r\n    COLOR_CHANGE_SPEED = 1,\r\n    COLORS = [\r\n        0x411517,\r\n        0x8B1B18,\r\n        0xC34319,\r\n        0xD39818,\r\n        0xDED56B,\r\n        0xFFF9B1\r\n    ],\r\n    canvas = document.getElementById('c'),\r\n    context = canvas.getContext('2d'),\r\n    particles = [];\r\n\r\nlet\r\n    getOrigin = () => {\r\n        return {\r\n            x: window.innerWidth * .5,\r\n            y: window.innerHeight * .85\r\n        };\r\n    },\r\n    origin = getOrigin(),\r\n    frameCount = 0,\r\n    resize = () => {\r\n        canvas.width = window.innerWidth;\r\n        canvas.height = window.innerHeight;\r\n\r\n        origin = getOrigin();\r\n    },\r\n    /**\r\n     * @param from : color to be an hexadecimal color, toIndex\r\n     * @param toIndex : an index  a color in COLORS array to fade to\r\n     */\r\n    colorCycle = (from, toIndex) => {\r\n        let r = from >> 16,\r\n            g = from >> 8 & 0xFF,\r\n            b = from & 0xFF,\r\n            r2 = (COLORS[toIndex] >> 16),\r\n            g2 = (COLORS[toIndex] >> 8 & 0xFF),\r\n            b2 = (COLORS[toIndex] & 0xFF);\r\n        if (r < r2)\r\n            r += COLOR_CHANGE_SPEED;\r\n        else if(r > r2)\r\n            r -= COLOR_CHANGE_SPEED;\r\n        if (g < g2)\r\n            g += COLOR_CHANGE_SPEED;\r\n        else if(g > g2)\r\n            g -= COLOR_CHANGE_SPEED;\r\n        if (b < b2)\r\n            b += COLOR_CHANGE_SPEED;\r\n        else if(b > b2)\r\n            b -= COLOR_CHANGE_SPEED;\r\n        return (r << 16 | g << 8 | b);\r\n    },\r\n    /**\r\n     * reset or creates a new particle.\r\n     */\r\n    particleFactory = (particle) => {\r\n        let p = particle || {};\r\n        p.x = origin.x;\r\n        p.y = origin.y;\r\n        p.color = COLORS[0];\r\n        p.colorIndex = 0;\r\n        p.angle = Math.random() * TAU;\r\n        //p.angle = ;\r\n        p.radius = BASE_RADIUS;\r\n        p.speed = Math.random() * MAX_SPEED +1;\r\n        return p;\r\n    },\r\n    /**\r\n     * Consider a particle dead if it is outside canvas\r\n     * or if its radius is negative.\r\n     */\r\n    dead = (particle) => {\r\n        return particle.radius <= 0 || particle.x < 0 - particle.radius || particle.y < 0 - particle.radius || particle.x > canvas.width + particle.radius || particle.y > canvas.height + particle.radius\r\n\r\n            ;\r\n    },\r\n//calculates the direction to go to from a given particle.\r\n//used to make the particle go up\r\n    angleToTop = (particle) => {\r\n        let target = {\r\n            x: canvas.width / 2,\r\n            y: 0\r\n        };\r\n        return Math.atan2(target.y - particle.y, target.x - particle.x);\r\n    },\r\n    /**\r\n     * Move the particle\r\n     */\r\n    move = (particle) => {\r\n        //wobble effect\r\n        let angle = particle.angle + Math.sin(frameCount * WOBBLE_FREQUENCY) * WOBBLE_ANGLE;\r\n\r\n        particle.x += Math.cos(angle) * particle.speed;\r\n        particle.y += Math.sin(angle) * particle.speed - GRAVITY;\r\n        //slowly change angle towards the top\r\n        let targetAngle = angleToTop(particle);\r\n        //if(particle.angle < TAU-TAU/4 && particle.angle > TAU/4 ){\r\n        if (particle.angle > targetAngle) {\r\n            particle.angle += DIRECTION_CHANGE_SPEED;\r\n            //}\r\n        } else {\r\n            particle.angle -= DIRECTION_CHANGE_SPEED\r\n            //}\r\n        }\r\n    },\r\n    resetAngle = (angle) => {\r\n        return angle;\r\n    },\r\n    evolve = (particle) => {\r\n        //slowly reduce circle size\r\n        particle.radius -= RADIUS_REDUCTION_SPEED;\r\n        //fade towards next color\r\n        if (particle.colorIndex + 1 < COLORS.length) {\r\n            particle.color = colorCycle(particle.color, particle.colorIndex + 1);\r\n        }\r\n        //next color\r\n        if (COLORS[particle.colorIndex + 1] == particle.color) {\r\n            particle.colorIndex++;\r\n        }\r\n    },\r\n    draw = (particle) => {\r\n        if (particle.radius > 0) {\r\n            context.fillStyle = '#' + particle.color.toString(16);\r\n            context.beginPath();\r\n            context.arc(particle.x, particle.y, particle.radius, 0, TAU, true);\r\n            context.fill();\r\n        }\r\n    },\r\n\r\n    animate = (t) => {\r\n\r\n        //reset canvas\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        //Draw\r\n        let aliveParticles = particles.filter((p) => {\r\n            return !dead(p);\r\n        }).sort((a, b) => {\r\n            //draw bigger first\r\n            if (a.radius > b.radius) {\r\n                return -1;\r\n            }\r\n            if (a.radius < b.radius) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n\r\n        });\r\n        aliveParticles.forEach(draw);\r\n        aliveParticles.forEach(move);\r\n        aliveParticles.forEach(evolve);\r\n\r\n        //new particle\r\n        if (frameCount % PARTICLE_FREQUENCY == 0) {\r\n            //don't create a new particle every time, for performance\r\n            let deadParticles = particles.filter(dead);\r\n            if (particles.length < MAX_PARTICLES && deadParticles.length == 0) {\r\n                particles.push(particleFactory());\r\n            } else {\r\n                particleFactory(particles.filter(dead)[0]);\r\n            }\r\n        }\r\n        frameCount++;\r\n        requestAnimationFrame(animate);\r\n    },\r\n    activateGoo = () => {\r\n        canvas.classList.toggle('gooey');\r\n    },\r\n    init = () => {\r\n        document.getElementById('activateGoo')\r\n            .addEventListener('change', activateGoo);\r\n        resize();\r\n        animate();\r\n    },\r\n    changeOrigin = (e) => {\r\n        origin.x = e.clientX;\r\n        origin.y = e.clientY;\r\n    };\r\ndocument.addEventListener('DOMContentLoaded', init);\r\nwindow.addEventListener('resize', resize);\r\ncanvas.addEventListener('mousedown', changeOrigin);\r\ncanvas.addEventListener('mousemove', changeOrigin);\r\ndocument.addEventListener('mouseleave', (e)=>{origin = getOrigin();});"],"sourceRoot":"/source/"}