"use strict";var TAU=2*Math.PI,COLORS=[2901321,7912880,8507318,9167292,13039586],POINTS_QUANTITY=64,LINE_WIDTH=.25,MIN_DRAW_DISTANCE=50,MAX_DRAW_DISTANCE=200,ROTATION_SPEED=TAU/360,SPEED=1,canvas=document.getElementById("c"),context=canvas.getContext("2d"),points=[],resizer=function(){canvas.width=window.innerWidth,canvas.height=window.innerHeight},animator=function t(){context.clearRect(0,0,canvas.width,canvas.height),context.fillStyle="#"+COLORS[0].toString(16),context.fillRect(0,0,canvas.width,canvas.height),points.forEach(function(t){movePoint(t),drawPoint(t),collisionDetector(t),points.filter(function(n){var o=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return MAX_DRAW_DISTANCE>o&&o>MIN_DRAW_DISTANCE}).forEach(function(n){drawLine(t,n),drawLine(n,t)})}),requestAnimationFrame(t)},drawPoint=function(t){context.fillStyle="#"+COLORS[4].toString(16),context.fillRect(t.x-1,t.y-1,3,3)},drawLine=function(t,n){var o=angleFromPoints(t,n),i=t,e=distanceFromPoints(t,n),a=e/(10*Math.random()+10);context.beginPath(),context.moveTo(t.x,t.y);for(var r=void 0,c=1;e>c*a;c++)i={x:t.x+Math.cos(o)*c*a,y:t.y+Math.sin(o)*c*a},r=pointPerpendicularTo(i,o,10*Math.random(),c%2==0),context.lineTo(r.x,r.y);context.lineTo(n.x,n.y),context.lineWidth=LINE_WIDTH;var d=e/(MAX_DRAW_DISTANCE-MIN_DRAW_DISTANCE);.3>d?context.strokeStyle="#"+COLORS[2].toString(16):d>.6?context.strokeStyle="#"+COLORS[3].toString(16):context.strokeStyle="#"+COLORS[1].toString(16),context.stroke(),context.closePath()},pointPerpendicularTo=function(t,n,o,i){return{x:t.x+Math.cos(n+(i?TAU/4:-TAU/4))*o,y:t.y+Math.sin(n+(i?TAU/4:-TAU/4))*o}},angleFromPoints=function(t,n){return Math.atan2(n.y-t.y,n.x-t.x)},distanceFromPoints=function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},movePoint=function(t){t.a+=ROTATION_SPEED,t.o.x+=Math.cos(t.d)*SPEED,t.o.y+=Math.sin(t.d)*SPEED,t.x=t.o.x+Math.cos(t.a)*t.r,t.y=t.o.y+Math.sin(t.a)*t.r},collisionDetector=function(t){(t.o.x<0||t.o.x>window.innerWidth)&&(t.d=TAU/2-t.d),(t.o.y<0||t.o.y>window.innerHeight)&&(t.d=-t.d)},createPoint=function(){return{o:{x:Math.floor(Math.random()*window.innerWidth),y:Math.floor(Math.random()*window.innerHeight)},a:Math.random()*TAU,d:Math.random()*TAU,r:200*Math.random(),v:ROTATION_SPEED}},initPoints=function(){for(var t=0;POINTS_QUANTITY>t;t++)points.push(createPoint())},clickHandler=function(t){var n=createPoint();n.o.x=t.clientX,n.o.y=t.clientY,points.push(n)},initializer=function(){resizer(),initPoints(),requestAnimationFrame(animator)};window.addEventListener("resize",resizer,!1),canvas.addEventListener("click",clickHandler),document.addEventListener("DOMContentLoaded",initializer);