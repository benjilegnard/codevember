{"version":3,"sources":["06.js"],"names":[],"mappings":"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","file":"2015/11/06/06.js","sourcesContent":["const BASE_WIDTH = 40;\r\nconst DRAW_SPEED = 0.5;\r\nconst CYCLES_PER_FRAME = 3;\r\nconst WIDTH_DIM_SPEED = 0.01;\r\nconst MIN_BRANCH_LENGTH = 120;\r\nconst MAX_BRANCH_LENGTH = 360;\r\nconst MAX_BRANCHES_PER_SPLIT = 4;\r\nconst TREE_COLOR = {r: 0, g: 0, b: 0};\r\nconst BACK_COLOR = {r: 255, g: 255, b: 255};\r\nconst TAU = Math.PI * 2;\r\nconst BRANCH_MAX_ANGLE = TAU / 7;\r\n\r\nconst canvas = document.getElementById('c');\r\nconst context = canvas.getContext('2d');\r\nconst generators = [];\r\n\r\nclass BranchGenerator {\r\n    constructor(opts) {\r\n        //current pos\r\n        this.position = {\r\n            x: opts.x,\r\n            y: opts.y\r\n        };\r\n        //Radiant angle\r\n        this.direction = opts.a;\r\n        //width of the branch\r\n        this.width = opts.w || BASE_WIDTH;\r\n        this.life = 0;\r\n        this.length = Math.random() * (MAX_BRANCH_LENGTH - MIN_BRANCH_LENGTH) + MIN_BRANCH_LENGTH;\r\n        this.level = opts.l || 1;\r\n    }\r\n\r\n    evolve() {\r\n        //increment position in given direction\r\n        //reduce width\r\n        this.position.x += Math.cos(this.direction) * DRAW_SPEED;\r\n        this.position.y += Math.sin(this.direction) * DRAW_SPEED;\r\n        this.life++;\r\n        this.width -= WIDTH_DIM_SPEED * this.level;\r\n    }\r\n\r\n    getTangentPoint(a) {\r\n        return {\r\n            x: this.position.x + Math.cos(a) * this.width / 2,\r\n            y: this.position.y + Math.sin(a) * this.width / 2\r\n        };\r\n    }\r\n\r\n    draw() {\r\n        const start = this.getTangentPoint(this.direction + TAU / 4);\r\n        const end = this.getTangentPoint(this.direction - TAU / 4);\r\n        context.beginPath();\r\n        context.moveTo(start.x, start.y);\r\n        context.lineTo(end.x, end.y);\r\n        context.closePath();\r\n        context.stroke();\r\n    }\r\n\r\n    split() {\r\n        //Create new generators\r\n        let branchesNumber = Math.floor(Math.random() * MAX_BRANCHES_PER_SPLIT);\r\n        if (branchesNumber == 0) {\r\n            branchesNumber = 1;\r\n        }\r\n        let angle = 0;\r\n        for (let i = 0; i < branchesNumber; i++) {\r\n            angle = BRANCH_MAX_ANGLE * i - Math.random() * BRANCH_MAX_ANGLE,\r\n                generators.push(new BranchGenerator(\r\n                    {\r\n                        //sets the position a little\r\n                        x: this.position.x - Math.cos(this.direction) * this.width / 3,\r\n                        y: this.position.y - Math.sin(this.direction) * this.width / 3,\r\n                        a: this.direction + angle,\r\n                        w: this.width,\r\n                        l: this.level + 1\r\n                    }));\r\n        }\r\n        generators.splice(generators.indexOf(this), 1);\r\n    }\r\n}\r\n\r\nlet\r\n    cleanUp = ()=> {\r\n        generators.forEach((g)=> {\r\n            if (g.width <= 0) {\r\n                generators.splice(generators.indexOf(g), 1);\r\n            }\r\n        });\r\n    },\r\n    addGenerator = (e) => {\r\n        //fade previous trees\r\n        if (!generators.length) {\r\n            context.fillStyle = `rgba(${BACK_COLOR.r},${BACK_COLOR.g},${BACK_COLOR.b},0.25)`;\r\n            context.fillRect(0, 0, canvas.width, canvas.height);\r\n        }\r\n        context.fillStyle = `rgb(${TREE_COLOR.r},${TREE_COLOR.g},${TREE_COLOR.b})`;\r\n        //new tree gen\r\n        generators.push(new BranchGenerator({x: e.x, y: canvas.height, a: -TAU / 4}))\r\n    },\r\n    touch = (e)=> {\r\n        let x, y;\r\n        for (t of e.touches) {\r\n            x = t.clientX;\r\n            y = t.clientY;\r\n        }\r\n        addGenerator({x: x, y: y});\r\n    },\r\n    click = (e) => {\r\n        console.log(e);\r\n        addGenerator({x: e.clientX, y: e.clientY});\r\n    },\r\n    animate = (t) => {\r\n\r\n        generators.forEach((g)=> {\r\n            for (let i = 0; i < CYCLES_PER_FRAME; i++) {\r\n                g.draw();\r\n                g.evolve();\r\n                if (g.life > g.length) {\r\n                    g.split();\r\n                }\r\n            }\r\n        });\r\n        cleanUp();\r\n        if (!generators.length) {\r\n            addGenerator({x: Math.random() * canvas.width, y: canvas.height});\r\n        }\r\n        requestAnimationFrame(animate);\r\n    },\r\n    resize = () => {\r\n        canvas.width = window.innerWidth;\r\n        canvas.height = window.innerHeight;\r\n    },\r\n    init = () => {\r\n        resize();\r\n        addGenerator({x: canvas.width / 2, y: canvas.height});\r\n        animate();\r\n    },\r\n    reset = (e) => {\r\n        e.stopPropagation();\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        return false;\r\n    };\r\ndocument.addEventListener('touch', touch);\r\ndocument.addEventListener('click', click);\r\nwindow.addEventListener('resize', resize);\r\ndocument.addEventListener('DOMContentLoaded', init);\r\n"],"sourceRoot":"/source/"}