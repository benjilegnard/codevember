{"version":3,"sources":["28.js"],"names":[],"mappings":"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","file":"2015/11/28/28.js","sourcesContent":["const TAU = Math.PI * 2,\r\n    GRAVITY = .1,\r\n    MAX_SPEED = 2,\r\n    MAX_PARTICLES = 320,\r\n    COLOR_CYCLE_STEP = 1;\r\n\r\n\r\n\r\nclass Particle {\r\n    constructor(opts) {\r\n        this.x = opts.x || canvas.width / 2;\r\n        this.y = opts.y || canvas.height / 2;\r\n        this.radius = opts.r || Math.floor(Math.random() * 10) + 1;\r\n        this.angle = opts.a || Math.random() * TAU;\r\n        this.speed = opts.s || Math.random() * MAX_SPEED;\r\n        this.vx = Math.cos(this.angle) * this.speed;\r\n        this.vy = Math.sin(this.angle) * this.speed;\r\n        this.alpha = 1;\r\n        this.colorIndex = 0;\r\n    }\r\n\r\n    draw(context) {\r\n        context.beginPath();\r\n        context.fillStyle = 'rgba(' + this.color[0] + ',' + this.color[1] + ',' + this.color[2] + ',' + this.alpha + ')';\r\n        context.arc(this.x, this.y, this.radius, 0, TAU, true);\r\n        context.fill();\r\n    }\r\n\r\n    move() {\r\n        this.vy += GRAVITY;\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n    }\r\n\r\n    reset(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.radius = Math.floor(Math.random() * 10) + 1;\r\n        this.angle = Math.random() * TAU;\r\n        this.speed = Math.random() * MAX_SPEED;\r\n        this.vx = Math.cos(this.angle) * this.speed;\r\n        this.vy = Math.sin(this.angle) * this.speed;\r\n        this.alpha = 1;\r\n        this.colorIndex = 0;\r\n    }\r\n\r\n    isAlive() {\r\n        return this.radius > 0 && this.alpha > 0;\r\n    }\r\n\r\n    grow() {\r\n        //fade towards next color\r\n        if (this.colorIndex + 1 < this.colors.length) {\r\n            this.colorCycle(this.colorIndex + 1);\r\n        }\r\n        //next color\r\n        if (this.colors[this.colorIndex + 1] === this.color) {\r\n            this.colorIndex++;\r\n        }\r\n    }\r\n\r\n    colorCycle(toIndex) {\r\n        if(this.hasOwnProperty('color')){\r\n            for (const rgb in [0,1,2]) {\r\n                if (this.color[rgb] < this.colors[toIndex][rgb])\r\n                    this.color[rgb] = this.color[rgb] + COLOR_CYCLE_STEP;\r\n                else if (this.color[rgb] > this.colors[toIndex][rgb])\r\n                    this.color[rgb] = this.color[rgb] - COLOR_CYCLE_STEP;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nclass Smoke extends Particle {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.colors = [[64, 64, 64], [0, 0, 0]];\r\n        this.color = this.colors[0];\r\n    }\r\n\r\n    grow() {\r\n        super.grow();\r\n        this.radius += .2;\r\n        this.alpha -= 0.01;\r\n    }\r\n\r\n    reset(x, y) {\r\n        super.reset(x, y);\r\n    }\r\n\r\n    move() {\r\n        this.vy -= GRAVITY / 2;\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n    }\r\n}\r\n\r\nclass Fire extends Particle {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.reset(this.x, this.y);\r\n        this.colors = [[255, 249, 177], [211, 152, 24],[195, 67, 25]];\r\n        this.color = this.colors[0];\r\n    }\r\n\r\n    grow() {\r\n        super.grow();\r\n        this.radius -= 0.05;\r\n    }\r\n\r\n    reset(x, y) {\r\n        super.reset(x, y);\r\n    }\r\n}\r\n\r\nclass Scene {\r\n\r\n    constructor() {\r\n        this.canvas = document.getElementById('canvas');\r\n        this.context = canvas.getContext('2d');\r\n        this.particles = [];\r\n        this.frameCount = 0;\r\n    }\r\n\r\n    initialize() {\r\n        this.resize();\r\n        this.mouse = {x: canvas.width / 2, y: canvas.height / 2};\r\n        for (let i = 0; i < MAX_PARTICLES; i++) {\r\n\r\n            if (i % 2) {\r\n                this.particles.push(new Smoke({}));\r\n            } else {\r\n                this.particles.push(new Fire({}));\r\n\r\n            }\r\n        }\r\n        this.animate();\r\n        this.explode();\r\n        this.canvas.addEventListener(\r\n            'touchmove',\r\n            (event)=> {\r\n                event.touches.forEach((touchEvent)=> {\r\n                    window.scene.mouseMove(touchEvent);\r\n                });\r\n            }\r\n        );\r\n        this.canvas.addEventListener('touchend', (event)=> {\r\n            this.explode();\r\n        });\r\n        this.canvas.addEventListener('mouseup', (event)=> {\r\n            this.explode();\r\n        });\r\n        this.canvas.addEventListener(\r\n            'mousemove',\r\n            (event)=> {\r\n                window.scene.mouseMove(event);\r\n            }\r\n        );\r\n    }\r\n\r\n    explode() {\r\n        this.particles.forEach(\r\n            (p)=> {\r\n                p.reset(this.mouse.x, this.mouse.y);\r\n            }\r\n        );\r\n    }\r\n\r\n    animate() {\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        //this.context.fillStyle = 'rgb('+COLORS.BG[0]+','+COLORS.BG[1]+','+COLORS.BG[2]+')';\r\n        //this.context.fillRect(0,0,this.canvas.width,this.canvas.height);\r\n\r\n        this.particles\r\n            .filter((particle)=>particle.isAlive())\r\n            .forEach(\r\n                (particle)=> {\r\n                    particle.draw(this.context);\r\n                    particle.grow();\r\n                    particle.move(this.frameCount);\r\n                }\r\n            );\r\n\r\n        requestAnimationFrame(()=> {\r\n            this.frameCount++;\r\n            this.animate();\r\n        })\r\n    }\r\n\r\n    resize() {\r\n        this.canvas.width = window.innerWidth;\r\n        this.canvas.height = window.innerHeight;\r\n    }\r\n\r\n    mouseMove(event) {\r\n        this.mouse.x = event.pageX;\r\n        this.mouse.y = event.pageY;\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\r\n    'DOMContentLoaded',\r\n    ()=> {\r\n        window.scene = new Scene();\r\n        scene.initialize();\r\n    }\r\n);\r\nwindow.addEventListener(\r\n    'resize',\r\n    ()=> {\r\n        window.scene.resize();\r\n    }\r\n);"],"sourceRoot":"/source/"}