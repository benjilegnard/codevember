{"version":3,"sources":["14.js"],"names":[],"mappings":"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","file":"2015/11/14/14.js","sourcesContent":["\r\n\r\n\r\n\r\nconst LINE_COLOR = 'white';\r\nconst BACK_COLOR = 'rgb(0,0,0)';\r\nconst SOUND_SOURCE = 'http://media.soundcloud.com/stream/vOY0tiM1S6pU.mp3';\r\nvar audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n\r\nvar gainNode = audioContext.createGain();\r\nvar analyser = audioContext.createAnalyser();\r\n\r\nvar canvas = document.getElementById('canvas');\r\nvar context = canvas.getContext('2d');\r\nanalyser.fftSize = 512;\r\nvar buffer = null;\r\nvar bufferLength = analyser.frequencyBinCount;\r\nvar dataArray = new Uint8Array(bufferLength);\r\n\r\nfunction playSound(buffer){\r\n    let source = audioContext.createBufferSource(); // creates a sound source\r\n    source.buffer = buffer;\r\n    source.connect(gainNode);\r\n    gainNode.connect(audioContext.destination);\r\n    source.connect(analyser);\r\n    source.loop = true;\r\n    source.start();\r\n}\r\n\r\nfunction draw(){\r\n    analyser.getByteFrequencyData(dataArray);\r\n\r\n    var baseY = canvas.height/2,\r\n        path = new Path2D();\r\n    path.moveTo(0,baseY);\r\n    var spaceX = canvas.width / bufferLength;\r\n    for(let i = 0; i < bufferLength; i++) {\r\n        let y = dataArray[i]/128 * baseY - baseY;\r\n        path.lineTo(\r\n            i*spaceX,\r\n            y+baseY);\r\n    }\r\n    context.strokeStyle = LINE_COLOR;\r\n    context.stroke(path);\r\n}\r\n\r\nfunction animate(timestamp){\r\n    context.fillStyle = BACK_COLOR;\r\n    context.clearRect(0,0,canvas.width,canvas.height);\r\n    context.fillRect(0,0,canvas.width,canvas.height);\r\n    //Draw\r\n    draw();\r\n    requestAnimationFrame( animate );\r\n}\r\n\r\nfunction resize(event){\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n}\r\n\r\nfunction loaded(event){\r\n    audioContext.decodeAudioData(this.response, playSound);\r\n}\r\n\r\nfunction requestSource(){\r\n    let request = new XMLHttpRequest();\r\n    request.responseType = \"arraybuffer\";\r\n    request.addEventListener(\"load\", loaded);\r\n    request.open(\"GET\", SOUND_SOURCE);\r\n    request.send();\r\n}\r\n\r\nfunction initialize(event){\r\n    requestSource();\r\n    resize();\r\n    animate();\r\n}\r\n\r\nwindow.addEventListener('resize', resize);\r\ndocument.addEventListener('DOMContentLoaded', initialize);"],"sourceRoot":"/source/"}