{"version":3,"sources":["23.js"],"names":[],"mappings":"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","file":"2015/11/23/23.js","sourcesContent":["const\r\n    TAU = Math.PI * 2,\r\n    DEVIATION_SPEED = TAU / 1024,\r\n    DRAWING_SPEED = 0.5,\r\n    TRUNK_MIN_LIFE = 100,\r\n    TRUNK_MAX_LIFE = 120,\r\n    BRANCH_MIN_LIFE = 80,\r\n    BRANCH_MAX_LIFE = 100,\r\n    BRANCHES_PER_SPLIT = 4,\r\n    MAX_LEVEL = 5,\r\n    INITIAL_POINTS = 5,\r\n    LIFE_DECAY = 0.3,\r\n    colors = {\r\n        bleu: 'rgb(39,98,141)',\r\n        auLait: 'rgb(205,192,129)',\r\n        caramel: 'rgb(162,120,69)',\r\n        santaFe: 'rgb(120,52,2)',\r\n        candle: 'rgb(231,255,230)'\r\n    },\r\n    points = [],\r\n    leaves = [];\r\n\r\nclass GrowingPoint {\r\n    constructor(level, x, y, a, life, deviation) {\r\n        this.level = level || 0;\r\n        this.x = x || Math.random() * canvas.width;\r\n        this.y = y || Math.random() * canvas.height;\r\n        this.direction = a || TAU * Math.random();\r\n        this.life = life || this.randomLife();\r\n        this.deviation = deviation || ((Math.random() > .5) ? -1 : 1) * (Math.random() * DEVIATION_SPEED);\r\n\r\n        this.dead=false;\r\n    }\r\n    randomLife(){\r\n        if(this.level <1){\r\n            return Math.random() * (BRANCH_MAX_LIFE - BRANCH_MIN_LIFE) + BRANCH_MIN_LIFE;\r\n\r\n        }else{\r\n            return Math.random() * (TRUNK_MAX_LIFE - TRUNK_MIN_LIFE) + TRUNK_MIN_LIFE;\r\n        }\r\n    }\r\n    //draw the line\r\n    draw(context) {\r\n        context.fillStyle = colors.candle;\r\n        context.beginPath();\r\n        context.arc(this.x, this.y, 2, 0, TAU, true);\r\n        context.fill();\r\n    }\r\n\r\n    //move according to direction + deviation\r\n    grow() {\r\n        this.direction = this.direction + this.deviation;\r\n        this.x += Math.cos(this.direction) * DRAWING_SPEED;\r\n        this.y += Math.sin(this.direction) * DRAWING_SPEED;\r\n        this.life -= LIFE_DECAY;\r\n        if (this.life <= 0) {\r\n            this.die();\r\n        }\r\n    }\r\n\r\n    //split this current point to\r\n    split() {\r\n        const nextLevel = this.level + 1,\r\n            branchesForThisSplit = Math.floor(Math.random() * BRANCHES_PER_SPLIT + 1);\r\n        if (nextLevel < MAX_LEVEL){\r\n            for(let i = 0; i<branchesForThisSplit; i++){\r\n                points.push(\r\n                    new GrowingPoint(\r\n                        nextLevel,\r\n                        this.x,\r\n                        this.y,\r\n                        this.direction + (i*(TAU/2)/branchesForThisSplit -(TAU/2)/branchesForThisSplit) * (Math.random()>.5 ? -1 : 1)\r\n                    )\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    //when a point dies, it creates a Leaf and remove itself from the points array.\r\n    die() {\r\n        this.dead = true;\r\n        //remove from points drawn\r\n        points.splice(points.indexOf(this), 1);\r\n        //chance to generate a leaf and not children points\r\n        const leafOrSplit = (Math.random() > 0.3);\r\n        console.log(leafOrSplit);\r\n        if (this.level < MAX_LEVEL && leafOrSplit){\r\n            this.split();\r\n        }else{\r\n            let leaf;\r\n            if(this.level<2){\r\n                leaf = new Leaf(this.x, this.y, this.direction);\r\n            }else{\r\n                if(Math.random()>.5){\r\n                    leaf = new BigLeaf(this.x, this.y, this.direction)\r\n                }else{\r\n                    leaf = new Flower(this.x, this.y, this.direction)\r\n                }\r\n            }\r\n            leaves.push(leaf);\r\n        }\r\n    }\r\n    collide(canvas){\r\n        if(this.x > canvas.width )\r\n            this.x = 0;\r\n        if(this.y > canvas.height)\r\n            this.y = 0;\r\n        if(this.x < 0)\r\n            this.x = canvas.width ;\r\n        if(this.y < 0)\r\n            this.y = canvas.height;\r\n    }\r\n}\r\n\r\nclass Leaf {\r\n    constructor(x, y, a) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.direction = a;\r\n        this.radius = 1;\r\n    }\r\n\r\n    draw(context) {\r\n        context.beginPath();\r\n        context.fillStyle = colors.candle;\r\n        context.arc(this.x, this.y, this.radius, 0, TAU, true);\r\n        context.fill();\r\n    }\r\n\r\n    grow() {\r\n        if (this.radius >= 5) {\r\n            this.die();\r\n        }\r\n        this.radius ++;\r\n    }\r\n\r\n    die() {\r\n        leaves.splice(leaves.indexOf(this), 1);\r\n    }\r\n}\r\n\r\nclass BigLeaf extends Leaf {\r\n    constructor(x, y, a) {\r\n        super(x,y,a);\r\n        this.x = x;\r\n        this.y = y;\r\n        this.direction = a;\r\n        this.length = 20;\r\n    }\r\n\r\n    draw(context) {\r\n        context.beginPath();\r\n        context.fillStyle = colors.santaFe;\r\n        context.strokeStyle = colors.candle;\r\n        context.lineWidth = 5;\r\n        context.arc(this.x, this.y, this.length, 0, TAU, true);\r\n        context.fill();\r\n        context.fill();\r\n    }\r\n    drawLeftLeaf(context){\r\n\r\n    }\r\n    die() {\r\n        super.die();\r\n    }\r\n}\r\n\r\nclass Flower extends Leaf {\r\n    constructor(x, y, a) {\r\n        super(x,y,a);\r\n        this.length = 20;\r\n    }\r\n\r\n    draw(context) {\r\n        context.beginPath();\r\n        context.fillStyle = colors.santaFe;\r\n        context.arc(this.x, this.y, this.length, 0, TAU, true);\r\n        context.fill();\r\n    }\r\n    die() {\r\n        super.die();\r\n    }\r\n}\r\n\r\nclass Scene {\r\n\r\n    constructor() {\r\n        this.canvas = document.getElementById('canvas');\r\n        this.context = canvas.getContext('2d');\r\n    }\r\n\r\n    initialize() {\r\n        for (let i = 0; i < INITIAL_POINTS; i++) {\r\n            points.push(new GrowingPoint());\r\n        }\r\n        this.resize();\r\n        this.animate();\r\n    }\r\n\r\n    animate() {\r\n        // this.context.clearRect(0,0,this.canvas.width,this.canvas.height);\r\n        points.forEach((point)=>{\r\n            point.grow();\r\n            point.collide(this.canvas);\r\n            point.draw(this.context);\r\n        });\r\n        leaves.forEach((leaf)=>{\r\n            leaf.grow();\r\n            leaf.draw(this.context);\r\n        });\r\n\r\n        requestAnimationFrame(()=> {\r\n            this.animate();\r\n        })\r\n    }\r\n    resize() {\r\n        this.canvas.width = window.innerWidth;\r\n        this.canvas.height = window.innerHeight;\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\r\n    'DOMContentLoaded',\r\n    ()=> {\r\n        window.scene = new Scene();\r\n        scene.resize();\r\n        scene.initialize();\r\n    }\r\n);\r\nwindow.addEventListener(\r\n    'resize',\r\n    ()=> {\r\n        window.scene.resize();\r\n    }\r\n);"],"sourceRoot":"/source/"}