{"version":3,"sources":["05.js"],"names":[],"mappings":"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","file":"2015/11/05/05.js","sourcesContent":["const TAU = Math.PI * 2;\r\nconst CIRCLES_PER_GEN = 32;\r\nconst MAX_CIRCLES = 512;\r\nconst COLOR_FREQUENCY = 0.0314;\r\nconst GEN_FREQUENCY = 10;\r\nconst CIRCLE_SPEED = 1.6;\r\nconst CIRCLE_RADIUS = 6;\r\nconst ANGULAR_VARIATION = TAU / 6; //angle range in radiant in wich to change the direction.\r\nconst VARIATION_FREQ = 0.01;\r\n\r\nlet\r\n    frameCount = 0,\r\n    origin = {},\r\n    circles = [],\r\n    canvas = document.getElementById('c'),\r\n    context = canvas.getContext('2d');\r\n\r\nfunction resetOrigin(origin) {\r\n    origin.x = window.innerWidth / 2;\r\n    origin.y = window.innerHeight / 2;\r\n}\r\n\r\nfunction circleFactory(opts) {\r\n    let circle = opts || {};\r\n    circle.x = opts.x;\r\n    circle.y = opts.y;\r\n    circle.initialTimestamp = opts.initialTimestamp;\r\n    circle.color = cycleColor(opts);\r\n    circle.direction = opts.direction;\r\n    circle.recycled = true;\r\n    return circle;\r\n}\r\n\r\nfunction cycleColor(circle, timestamp) {\r\n    let i = Math.floor(circle.initialTimestamp || timestamp) / 100,\r\n        r = Math.sin(COLOR_FREQUENCY * i + TAU / 3) * 127 + 128,\r\n        g = Math.sin(COLOR_FREQUENCY * i + TAU / 3 * 2) * 127 + 128,\r\n        b = Math.sin(COLOR_FREQUENCY * i + TAU) * 127 + 128;\r\n\r\n    return (r << 16 | g << 8 | b);\r\n}\r\n\r\nfunction draw(circle) {\r\n    context.fillStyle = '#' + circle.color.toString(16);\r\n    context.beginPath();\r\n    context.arc(circle.x, circle.y, CIRCLE_RADIUS, 0, TAU, true);\r\n    context.fill();\r\n}\r\n\r\nfunction move(circle) {\r\n    let variation = Math.sin(frameCount * VARIATION_FREQ) * ANGULAR_VARIATION;\r\n\r\n    circle.x += Math.cos(circle.direction + variation) * CIRCLE_SPEED;\r\n    circle.y += Math.sin(circle.direction + variation) * CIRCLE_SPEED;\r\n}\r\n//distance between two points.\r\nfunction distance(p1, p2) {\r\n    return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\r\n}\r\n\r\nfunction isDead(circle) {\r\n    //point dead if outside canvas (buggy)\r\n    //return (circle.x < -CIRCLE_RADIUS || circle.y < -CIRCLE_RADIUS || circle.x > canvas.width || circle.y>canvas.height);\r\n    //consider a point dead if it is further from the diagonal of the screen than from the center.\r\n    return distance({x: canvas.width,y: canvas.height}, origin) < distance(circle, origin);\r\n}\r\n//generate a new wave of particles\r\nfunction particleWave(timestamp) {\r\n    for (let i = 0; i < CIRCLES_PER_GEN; i++) {\r\n        var deadCircles = circles.filter(isDead);\r\n        var circle = deadCircles[0] || {};\r\n        circle.initialTimestamp = timestamp;\r\n        circle.x = origin.x;\r\n        circle.y = origin.y;\r\n        circle.direction = (TAU / CIRCLES_PER_GEN) * i;\r\n        if (circle.recycled) {\r\n            circle = circleFactory(circle);\r\n        } else {\r\n            circles.push(circleFactory(circle));\r\n        }\r\n    }\r\n}\r\n\r\nfunction animate(timestamp) {\r\n    //reset canvas\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    context.fillStyle = 'black';\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n    //Draw\r\n    circles.forEach(draw);\r\n    circles.forEach(move);\r\n\r\n    if (frameCount % GEN_FREQUENCY == 0) {\r\n        particleWave(frameCount);\r\n    }\r\n    frameCount++;\r\n    requestAnimationFrame(animate);\r\n}\r\n\r\nfunction resize() {\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    resetOrigin(origin);\r\n}\r\n\r\nwindow.addEventListener( 'resize', resize );\r\ndocument.addEventListener('DOMContentLoaded',function(event){\r\n    resize();\r\n    animate(1);\r\n});"],"sourceRoot":"/source/"}